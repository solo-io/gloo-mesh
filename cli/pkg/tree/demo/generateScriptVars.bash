#!/bin/bash

# dump the contents of each .bash file into a .go file, exporting those contents as a string var
# this is so that we can get those file contents linked into the Go binary at compile time

find ./script/*.bash -type f | \
  while read -r f; do
    baseFileName=$(basename $f | sed -E s%\.bash%%)
    printf "// WARNING: Generated by %s\npackage script\n\nvar %s = \`%s\`\n" "$0" "$baseFileName" "$(cat $f)" >./script/"$baseFileName".go
  done
